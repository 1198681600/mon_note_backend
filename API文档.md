# MoodTrace åç«¯ API æ–‡æ¡£

## åŸºæœ¬ä¿¡æ¯

- **æœåŠ¡åœ°å€**: http://localhost:8080
- **API å‰ç¼€**: `/api`
- **è®¤è¯æ–¹å¼**: Bearer Token (è¯·æ±‚å¤´: `Authorization: Bearer <token>`)

## å“åº”æ ¼å¼

æ‰€æœ‰ API å“åº”éƒ½é‡‡ç”¨ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {}
}
```

## è®¤è¯ç›¸å…³ API

### 1. å‘é€é‚®ç®±éªŒè¯ç 

**æ¥å£åœ°å€**: `POST /api/auth/send-code`

**è¯·æ±‚å‚æ•°**:
```json
{
    "email": "user@example.com"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "éªŒè¯ç å·²å‘é€"
}
```

**è¯´æ˜**: éªŒè¯ç å›ºå®šä¸º `111111`ï¼Œæœ‰æ•ˆæœŸ15åˆ†é’Ÿ

---

### 2. ç”¨æˆ·æ³¨å†Œ

**æ¥å£åœ°å€**: `POST /api/auth/register`

**è¯·æ±‚å‚æ•°**:
```json
{
    "email": "user@example.com",
    "code": "111111"
}
```

**å‚æ•°è¯´æ˜**:
- `email`: é‚®ç®±åœ°å€ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼
- `code`: é‚®ç®±éªŒè¯ç 

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ³¨å†ŒæˆåŠŸ"
}
```

---

### 3. éªŒè¯é‚®ç®±

**æ¥å£åœ°å€**: `POST /api/auth/verify-email`

**è¯·æ±‚å‚æ•°**:
```json
{
    "email": "user@example.com",
    "code": "111111"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "é‚®ç®±éªŒè¯æˆåŠŸ"
}
```

---

### 4. ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**: `POST /api/auth/login`

**è¯·æ±‚å‚æ•°**:
```json
{
    "email": "user@example.com",
    "code": "111111"
}
```

**å‚æ•°è¯´æ˜**:
- `email`: é‚®ç®±åœ°å€
- `code`: é‚®ç®±éªŒè¯ç 

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç™»å½•æˆåŠŸ",
    "data": {
        "token": "a1b2c3d4e5f6...",
        "user": {
            "id": 1,
            "email": "user@example.com",
            "is_email_verified": true,
            "avatar": "",
            "nickname": "",
            "gender": "",
            "age": 0,
            "profession": "",
            "created_at": "2025-01-01T12:00:00Z",
            "updated_at": "2025-01-01T12:00:00Z"
        }
    }
}
```

**è¯´æ˜**: 
- ä½¿ç”¨é‚®ç®±éªŒè¯ç ç™»å½•ï¼Œæ— éœ€å¯†ç 
- Token æœ‰æ•ˆæœŸ24å°æ—¶
- è¯·å°† token ä¿å­˜å¹¶åœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨

---

## æƒ…ç»ªåˆ†æ API

### 1. åˆ†ææ—¥è®°å†…å®¹æƒ…ç»ª

**æ¥å£åœ°å€**: `POST /api/emotion/analyze-diary`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**è¯·æ±‚å‚æ•°**:
```json
{
    "diary_content": "ä»Šå¤©ä¸Šåˆå¿ƒæƒ…å¾ˆå¥½ï¼Œå·¥ä½œå¾ˆé¡ºåˆ©ã€‚ä¸­åˆåƒé¥­çš„æ—¶å€™å’ŒåŒäº‹èŠå¤©å¾ˆå¼€å¿ƒã€‚ä¸‹åˆå¼€ä¼šçš„æ—¶å€™æœ‰ç‚¹ç´§å¼ ï¼Œä½†æ˜¯æœ€åé¡ºåˆ©å®Œæˆäº†ã€‚æ™šä¸Šå›å®¶çœ‹åˆ°å®¶äººå¾ˆæ¸©æš–ã€‚",
    "diary_date": "2025-01-15",
    "user_context": {
        "age": 25,
        "gender": "å¥³",
        "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ"
    }
}
```

**å‚æ•°è¯´æ˜**:
- `diary_content`: æ—¥è®°å†…å®¹ (å¿…å¡«)
- `diary_date`: æ—¥è®°æ—¥æœŸ YYYY-MM-DDæ ¼å¼ (å¿…å¡«)
- `user_context`: ç”¨æˆ·èƒŒæ™¯ä¿¡æ¯ (å¯é€‰ï¼Œæœ‰åŠ©äºæ›´ç²¾å‡†çš„åˆ†æ)
    - `age`: å¹´é¾„
    - `gender`: æ€§åˆ«  
    - `profession`: èŒä¸š

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æƒ…ç»ªåˆ†æå®Œæˆ",
    "data": {
        "emotions": [
            {
                "emotion": "å¼€å¿ƒ",
                "intensity": 0.8,
                "time_period": "ä¸Šåˆ",
                "color": "#FFD700",
                "description": "å·¥ä½œé¡ºåˆ©å¸¦æ¥çš„æ»¡è¶³æ„Ÿ"
            },
            {
                "emotion": "ç´§å¼ ", 
                "intensity": 0.6,
                "time_period": "ä¸‹åˆ",
                "color": "#E17055",
                "description": "å¼€ä¼šå‰çš„ç„¦è™‘æƒ…ç»ª"
            },
            {
                "emotion": "æ¸©æš–",
                "intensity": 0.9,
                "time_period": "æ™šä¸Š", 
                "color": "#FFB8B8",
                "description": "å®¶åº­æ¸©é¦¨å¸¦æ¥çš„æ„ŸåŠ¨"
            }
        ],
        "gradient_suggestion": {
            "type": "sweep",
            "reasoning": "ä¸€å¤©ä¸­æœ‰å¤šç§æƒ…ç»ªè½¬æ¢ï¼Œé€‚åˆä½¿ç”¨æ‰«ææ¸å˜å±•ç°æƒ…ç»ªè½®è½¬"
        },
        "summary": {
            "dominant_emotion": "ç§¯æ",
            "emotional_stability": 7.5,
            "mood_trend": "æ•´ä½“å‘å¥½",
            "energy_level": "ä¸­ç­‰åé«˜"
        },
        "insights": [
            "ä»Šå¤©æ•´ä½“æƒ…ç»ªçŠ¶æ€è‰¯å¥½ï¼Œå·¥ä½œå’Œå®¶åº­éƒ½ç»™ä½ å¸¦æ¥äº†æ­£é¢æƒ…ç»ª",
            "ä¸‹åˆçš„ç´§å¼ æƒ…ç»ªæ˜¯æ­£å¸¸çš„å·¥ä½œå‹åŠ›ååº”ï¼Œä½†æœ€ç»ˆå¾—åˆ°äº†å¾ˆå¥½çš„ç¼“è§£",
            "å®¶åº­å…³ç³»æ˜¯ä½ é‡è¦çš„æƒ…ç»ªæ”¯æ’‘ç‚¹"
        ],
        "recommendations": [
            "ç»§ç»­ä¿æŒå·¥ä½œå’Œç”Ÿæ´»çš„å¹³è¡¡",
            "å¯ä»¥åœ¨å¼€ä¼šå‰åšä¸€äº›æ·±å‘¼å¸æ¥ç¼“è§£ç´§å¼ ",
            "å¤šå’Œå®¶äººåˆ†äº«å·¥ä½œä¸­çš„æˆå°±"
        ]
    }
}
```

---

### 2. åˆ†æä¸€å‘¨æƒ…ç»ªè¶‹åŠ¿

**æ¥å£åœ°å€**: `POST /api/emotion/analyze-weekly`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**è¯·æ±‚å‚æ•°**:
```json
{
    "week_start": "2025-01-13",
    "diary_data": [
        {
            "date": "2025-01-13", 
            "emotions": [
                {
                    "emotion": "å¼€å¿ƒ",
                    "intensity": 0.8,
                    "time_period": "ä¸Šåˆ"
                }
            ]
        },
        {
            "date": "2025-01-14",
            "emotions": [
                {
                    "emotion": "ç„¦è™‘", 
                    "intensity": 0.7,
                    "time_period": "ä¸‹åˆ"
                }
            ]
        }
    ]
}
```

**å‚æ•°è¯´æ˜**:
- `week_start`: ä¸€å‘¨å¼€å§‹æ—¥æœŸ YYYY-MM-DDæ ¼å¼ (å¿…å¡«)
- `diary_data`: è¿™ä¸€å‘¨çš„æƒ…ç»ªæ•°æ®æ•°ç»„ (å¿…å¡«)

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ä¸€å‘¨æƒ…ç»ªåˆ†æå®Œæˆ", 
    "data": {
        "weekly_pattern": {
            "monday": {"dominant": "å¹³é™", "intensity": 0.6},
            "tuesday": {"dominant": "å¼€å¿ƒ", "intensity": 0.8},
            "wednesday": {"dominant": "ç„¦è™‘", "intensity": 0.7},
            "thursday": {"dominant": "æ»¡è¶³", "intensity": 0.7},
            "friday": {"dominant": "å…´å¥‹", "intensity": 0.9},
            "saturday": {"dominant": "æ”¾æ¾", "intensity": 0.8},
            "sunday": {"dominant": "æ¸©æš–", "intensity": 0.8}
        },
        "insights": [
            "æœ¬å‘¨æ•´ä½“æƒ…ç»ªæ³¢åŠ¨å±äºæ­£å¸¸èŒƒå›´",
            "å‘¨ä¸‰å‡ºç°ç„¦è™‘æƒ…ç»ªï¼Œå¯èƒ½ä¸å·¥ä½œå‹åŠ›ç›¸å…³",
            "å‘¨æœ«æƒ…ç»ªæ˜æ˜¾æ”¹å–„ï¼Œä¼‘æ¯å¯¹ä½ å¾ˆé‡è¦"
        ],
        "recommendations": [
            "å‘¨ä¸‰æ˜¯ä½ çš„æƒ…ç»ªä½è°·æœŸï¼Œå»ºè®®å®‰æ’è½»æ¾çš„æ´»åŠ¨",
            "ä¿æŒç°æœ‰çš„å‘¨æœ«æ”¾æ¾ä¹ æƒ¯",
            "å¯ä»¥åœ¨å‘¨ä¸­å¢åŠ ä¸€äº›å‡å‹æ´»åŠ¨"
        ],
        "emotion_score": 7.4,
        "stability_score": 6.8
    }
}
```

**è¯´æ˜**:
- éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
- åŸºäºClaude AIè¿›è¡Œæ™ºèƒ½åˆ†æ
- è¿”å›è¯¦ç»†çš„ä¸€å‘¨æƒ…ç»ªæ¨¡å¼å’Œå»ºè®®

---

### 3. Claude AI æç¤ºè¯æ¨¡æ¿

**æœåŠ¡ç«¯å®ç°å‚è€ƒ** - è°ƒç”¨Claude APIæ—¶ä½¿ç”¨ä»¥ä¸‹æç¤ºè¯ï¼š

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æƒ…ç»ªåˆ†æä¸“å®¶ï¼Œä¸“é—¨åˆ†æç”¨æˆ·çš„æ—¥è®°å†…å®¹å¹¶æå–æƒ…ç»ªä¿¡æ¯ã€‚

## ä»»åŠ¡è¦æ±‚
åˆ†æä»¥ä¸‹æ—¥è®°å†…å®¹ï¼Œæå–å…¶ä¸­çš„æƒ…ç»ªä¿¡æ¯ï¼Œå¹¶æŒ‰æŒ‡å®šJSONæ ¼å¼è¿”å›ç»“æœã€‚

## æ—¥è®°å†…å®¹
{diary_content}

## æ—¥è®°æ—¥æœŸ  
{diary_date}

## ç”¨æˆ·èƒŒæ™¯ï¼ˆå¯é€‰ï¼‰
å¹´é¾„: {age}
æ€§åˆ«: {gender}  
èŒä¸š: {profession}

## æƒ…ç»ªè‰²å½©æ˜ å°„è¡¨
è¯·ä»ä»¥ä¸‹é¢„å®šä¹‰æƒ…ç»ªä¸­é€‰æ‹©æœ€åŒ¹é…çš„ï¼š
- å¼€å¿ƒ: #FFD700 (é‡‘é»„è‰²)
- å¿«ä¹: #FF6B6B (çŠç‘šçº¢)
- å…´å¥‹: #FF8E53 (æ©™è‰²)
- å¹³é™: #4ECDC4 (é’ç»¿è‰²)
- æ”¾æ¾: #45B7D1 (å¤©è“è‰²)
- æ»¡è¶³: #96CEB4 (è–„è·ç»¿)
- éš¾è¿‡: #6C5CE7 (ç´«è‰²)
- æ²®ä¸§: #74B9FF (è“è‰²)
- ç„¦è™‘: #FDCB6E (æ·¡é»„è‰²)
- ç´§å¼ : #E17055 (æ©™çº¢è‰²)
- æ„¤æ€’: #D63031 (çº¢è‰²)
- çƒ¦èº: #E84393 (ç²‰çº¢è‰²)
- æ„ŸåŠ¨: #A29BFE (æ·¡ç´«è‰²)
- æ¸©æš–: #FFB8B8 (ç²‰è‰²)
- å­¤ç‹¬: #636E72 (ç°è‰²)
- è¿·èŒ«: #B2BEC3 (æµ…ç°è‰²)

## è¾“å‡ºæ ¼å¼
è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ï¼š

{
  "emotions": [
    {
      "emotion": "æƒ…ç»ªåç§°",
      "intensity": 0.0-1.0ä¹‹é—´çš„æ•°å€¼,
      "time_period": "ä¸Šåˆ/ä¸­åˆ/ä¸‹åˆ/æ™šä¸Š",
      "color": "å¯¹åº”çš„é¢œè‰²ä»£ç ",
      "description": "è¯¥æƒ…ç»ªçš„ç®€çŸ­æè¿°(20å­—ä»¥å†…)"
    }
  ],
  "gradient_suggestion": {
    "type": "radial/sweep/multiPoint/wave/diagonal",
    "reasoning": "é€‰æ‹©æ­¤æ¸å˜ç±»å‹çš„åŸå› "
  },
  "summary": {
    "dominant_emotion": "ä¸»å¯¼æƒ…ç»ª",
    "emotional_stability": 1-10çš„è¯„åˆ†,
    "mood_trend": "æ•´ä½“è¶‹åŠ¿æè¿°",
    "energy_level": "ä½/ä¸­ç­‰/é«˜"
  },
  "insights": [
    "åˆ†ææ´å¯Ÿ1",
    "åˆ†ææ´å¯Ÿ2",
    "åˆ†ææ´å¯Ÿ3"
  ],
  "recommendations": [
    "å»ºè®®1", 
    "å»ºè®®2",
    "å»ºè®®3"
  ]
}

## æ³¨æ„äº‹é¡¹
1. intensityå€¼å¿…é¡»åœ¨0.0-1.0ä¹‹é—´
2. emotionå¿…é¡»ä»é¢„å®šä¹‰åˆ—è¡¨ä¸­é€‰æ‹©
3. time_periodåªèƒ½æ˜¯ï¼šä¸Šåˆã€ä¸­åˆã€ä¸‹åˆã€æ™šä¸Š
4. æ¯ä¸ªæ•°ç»„æœ€å¤šåŒ…å«5ä¸ªå…ƒç´ 
5. æè¿°è¦ç®€æ´å‡†ç¡®ï¼Œè´´åˆä¸­æ–‡è¡¨è¾¾ä¹ æƒ¯
6. åˆ†æè¦ä¸“ä¸šä½†æ˜“æ‡‚ï¼Œé¿å…è¿‡äºå­¦æœ¯åŒ–çš„è¡¨è¿°
```

**è¯´æ˜**:
- éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
- åŸºäºClaude AIè¿›è¡Œæ™ºèƒ½åˆ†æ
- è¿”å›è¯¦ç»†çš„æƒ…ç»ªæ•°æ®ç”¨äºå®¢æˆ·ç«¯æ¸å˜èƒŒæ™¯ç”Ÿæˆ

---

## éœ€è¦è®¤è¯çš„ API

ä»¥ä¸‹æ¥å£éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ `Authorization: Bearer <token>`

### 2. è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ",
    "data": {
        "id": 1,
        "email": "user@example.com",
        "is_email_verified": true,
        "avatar": "",
        "nickname": "",
        "gender": "",
        "age": 0,
        "profession": "",
        "created_at": "2025-01-01T12:00:00Z",
        "updated_at": "2025-01-01T12:00:00Z"
    }
}
```

---

### 3. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `POST /api/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**è¯·æ±‚å‚æ•°**:
```json
{
    "nickname": "æˆ‘çš„æ˜µç§°",
    "gender": "ç”·",
    "age": 25,
    "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "avatar": "https://example.com/avatar.jpg"
}
```

**å‚æ•°è¯´æ˜**:
- `nickname`: æ˜µç§° (å¯é€‰)
- `gender`: æ€§åˆ« (å¯é€‰)
- `age`: å¹´é¾„ (å¯é€‰)
- `profession`: èŒä¸š (å¯é€‰)
- `avatar`: å¤´åƒURL (å¯é€‰)

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ›´æ–°ç”¨æˆ·ä¿¡æ¯æˆåŠŸ",
    "data": {
        "id": 1,
        "email": "user@example.com",
        "is_email_verified": true,
        "avatar": "https://example.com/avatar.jpg",
        "nickname": "æˆ‘çš„æ˜µç§°",
        "gender": "ç”·",
        "age": 25,
        "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "created_at": "2025-01-01T12:00:00Z",
        "updated_at": "2025-01-01T14:30:00Z"
    }
}
```

**è¯´æ˜**: 
- æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œåªæ›´æ–°æä¾›çš„å­—æ®µ
- éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯

---

### 4. ç”Ÿæˆæ–‡ä»¶ä¸Šä¼ é“¾æ¥

**æ¥å£åœ°å€**: `POST /api/upload/generate-url`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**è¯·æ±‚å‚æ•°**:
```json
{
    "file_type": "image/jpeg"
}
```

**å‚æ•°è¯´æ˜**:
- `file_type`: æ–‡ä»¶ç±»å‹ï¼Œæ”¯æŒçš„ç±»å‹ï¼š
  - `image/jpeg` æˆ– `image/jpg`: JPEGå›¾ç‰‡
  - `image/png`: PNGå›¾ç‰‡
  - `image/webp`: WebPå›¾ç‰‡

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç”Ÿæˆä¸Šä¼ é“¾æ¥æˆåŠŸ",
    "data": {
        "upload_url": "https://account_id.r2.cloudflarestorage.com/bucket/avatars/uuid.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&...",
        "file_url": "https://account_id.r2.cloudflarestorage.com/bucket/avatars/uuid.jpg",
        "file_name": "avatars/uuid.jpg",
        "expires_in": 900
    }
}
```

**ä½¿ç”¨æµç¨‹**:
1. è°ƒç”¨æ­¤æ¥å£è·å–é¢„ç­¾åä¸Šä¼ URL
2. ä½¿ç”¨ `upload_url` é€šè¿‡ HTTP PUT è¯·æ±‚ç›´æ¥ä¸Šä¼ æ–‡ä»¶åˆ°R2
3. ä¸Šä¼ æˆåŠŸåï¼Œä½¿ç”¨ `file_url` ä½œä¸ºå¤´åƒURLè°ƒç”¨æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ¥å£

**ä¸Šä¼ æ–‡ä»¶ç¤ºä¾‹**:
```bash
# 1. è·å–ä¸Šä¼ é“¾æ¥
curl -X POST http://localhost:8080/api/upload/generate-url \
  -H "Authorization: Bearer your_token_here" \
  -H "Content-Type: application/json" \
  -d '{"file_type":"image/jpeg"}'

# 2. ä½¿ç”¨è¿”å›çš„upload_urlä¸Šä¼ æ–‡ä»¶
curl -X PUT "è¿”å›çš„upload_url" \
  -H "Content-Type: image/jpeg" \
  --data-binary @avatar.jpg

# 3. æ›´æ–°ç”¨æˆ·å¤´åƒ
curl -X POST http://localhost:8080/api/profile \
  -H "Authorization: Bearer your_token_here" \
  -H "Content-Type: application/json" \
  -d '{"avatar":"è¿”å›çš„file_url"}'
```

**è¯´æ˜**: 
- ä¸Šä¼ é“¾æ¥æœ‰æ•ˆæœŸ15åˆ†é’Ÿ
- æ–‡ä»¶ä¼šä¿å­˜åˆ° `avatars/` ç›®å½•ä¸‹
- éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
- éœ€è¦é…ç½®Cloudflare R2ç¯å¢ƒå˜é‡

---

### 5. é€€å‡ºç™»å½•

**æ¥å£åœ°å€**: `POST /api/logout`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <your_token>
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "é€€å‡ºç™»å½•æˆåŠŸ"
}
```

**è¯´æ˜**: é€€å‡ºç™»å½•å token å°†å¤±æ•ˆ

---

## ğŸ†• æ—¥è®° API (é›†æˆæƒ…ç»ªåˆ†æ)

**é‡è¦æ›´æ–°**: ä» v2.0 å¼€å§‹ï¼Œæ‰€æœ‰æ—¥è®°ç›¸å…³æ¥å£éƒ½é›†æˆäº†æƒ…ç»ªåˆ†æåŠŸèƒ½ã€‚

### åŠŸèƒ½ç‰¹ç‚¹

1. **è‡ªåŠ¨æƒ…ç»ªåˆ†æ**: ä¿å­˜æˆ–æ›´æ–°æ—¥è®°æ—¶è‡ªåŠ¨è°ƒç”¨ Claude AI è¿›è¡Œæƒ…ç»ªåˆ†æ
2. **å®Œæ•´æƒ…ç»ªæ•°æ®**: è¿”å›è¯¦ç»†çš„æƒ…ç»ªä¿¡æ¯ï¼ŒåŒ…æ‹¬æƒ…ç»ªç±»å‹ã€å¼ºåº¦ã€æ—¶é—´æ®µã€é¢œè‰²ç­‰
3. **æ¸å˜å»ºè®®**: åŸºäºæƒ…ç»ªæ•°æ®æä¾›èƒŒæ™¯æ¸å˜ç±»å‹å»ºè®®
4. **æ™ºèƒ½æ´å¯Ÿ**: æä¾›ä¸ªæ€§åŒ–çš„æƒ…ç»ªåˆ†ææ´å¯Ÿå’Œå»ºè®®
5. **å†å²æ•°æ®**: è·å–æ—¥è®°æ—¶åŒ…å«å®Œæ•´çš„å†å²æƒ…ç»ªåˆ†ææ•°æ®

### æ•°æ®ç»“æ„è¯´æ˜

#### æƒ…ç»ªåˆ†æå“åº”æ ¼å¼
```json
{
    "emotion_data": {
        "emotions": [
            {
                "emotion": "æƒ…ç»ªåç§°",           // ä»é¢„å®šä¹‰æƒ…ç»ªåˆ—è¡¨ä¸­é€‰æ‹©
                "intensity": 0.8,             // æƒ…ç»ªå¼ºåº¦ (0.0-1.0)
                "time_period": "ä¸Šåˆ",         // æ—¶é—´æ®µ: ä¸Šåˆ/ä¸­åˆ/ä¸‹åˆ/æ™šä¸Š
                "color": "#FFD700",           // æƒ…ç»ªå¯¹åº”çš„é¢œè‰²ä»£ç 
                "description": "æƒ…ç»ªæè¿°"      // 20å­—ä»¥å†…çš„ç®€çŸ­æè¿°
            }
        ],
        "gradient_suggestion": {
            "type": "sweep",                  // æ¸å˜ç±»å‹: radial/sweep/multiPoint/wave/diagonal
            "reasoning": "é€‰æ‹©åŸå› "           // é€‰æ‹©æ­¤æ¸å˜ç±»å‹çš„åŸå› 
        },
        "summary": {
            "dominant_emotion": "ä¸»å¯¼æƒ…ç»ª",   // æ•´ä½“ä¸»å¯¼æƒ…ç»ª
            "emotional_stability": 7.5,     // æƒ…ç»ªç¨³å®šæ€§è¯„åˆ† (1-10)
            "mood_trend": "æ•´ä½“è¶‹åŠ¿",        // æƒ…ç»ªè¶‹åŠ¿æè¿°
            "energy_level": "ä¸­ç­‰åé«˜"       // èƒ½é‡æ°´å¹³: ä½/ä¸­ç­‰/é«˜
        },
        "insights": [                        // æœ€å¤š5ä¸ªåˆ†ææ´å¯Ÿ
            "åˆ†ææ´å¯Ÿ1",
            "åˆ†ææ´å¯Ÿ2"
        ],
        "recommendations": [                 // æœ€å¤š5ä¸ªå»ºè®®
            "å»ºè®®1",
            "å»ºè®®2"
        ]
    }
}
```

#### æ”¯æŒçš„æƒ…ç»ªç±»å‹å’Œé¢œè‰²
| æƒ…ç»ª | é¢œè‰²ä»£ç  | è‰²å½©æè¿° |
|------|----------|----------|
| å¼€å¿ƒ | #FFD700 | é‡‘é»„è‰² |
| å¿«ä¹ | #FF6B6B | çŠç‘šçº¢ |
| å…´å¥‹ | #FF8E53 | æ©™è‰² |
| å¹³é™ | #4ECDC4 | é’ç»¿è‰² |
| æ”¾æ¾ | #45B7D1 | å¤©è“è‰² |
| æ»¡è¶³ | #96CEB4 | è–„è·ç»¿ |
| éš¾è¿‡ | #6C5CE7 | ç´«è‰² |
| æ²®ä¸§ | #74B9FF | è“è‰² |
| ç„¦è™‘ | #FDCB6E | æ·¡é»„è‰² |
| ç´§å¼  | #E17055 | æ©™çº¢è‰² |
| æ„¤æ€’ | #D63031 | çº¢è‰² |
| çƒ¦èº | #E84393 | ç²‰çº¢è‰² |
| æ„ŸåŠ¨ | #A29BFE | æ·¡ç´«è‰² |
| æ¸©æš– | #FFB8B8 | ç²‰è‰² |
| å­¤ç‹¬ | #636E72 | ç°è‰² |
| è¿·èŒ« | #B2BEC3 | æµ…ç°è‰² |

#### æ¸å˜ç±»å‹è§„åˆ™
- **1ç§æƒ…ç»ª**: `radial` (å¾„å‘æ¸å˜)
- **2ç§æƒ…ç»ª**: `diagonal` (å¯¹è§’çº¿æ¸å˜) 
- **3ç§æƒ…ç»ª**: `sweep` (æ‰«ææ¸å˜)
- **4+ç§æƒ…ç»ª**: `multiPoint` (å¤šç„¦ç‚¹æ¸å˜)

---

## æ—¥è®° API

### 1. åˆ›å»ºæ—¥è®°

**æ¥å£åœ°å€**: `POST /api/diary/create`

**è¯´æ˜**: åˆ›å»ºä¸€ç¯‡æ–°çš„æ—¥è®°ã€‚æ¯ä¸ªç”¨æˆ·æ¯å¤©åªèƒ½åˆ›å»ºä¸€ç¯‡æ—¥è®°ã€‚**ä¿å­˜æ—¶è‡ªåŠ¨è¿›è¡Œæƒ…ç»ªåˆ†æå¹¶è¿”å›å®Œæ•´çš„æƒ…ç»ªæ•°æ®**ã€‚

**è¯·æ±‚å¤´**:
`Authorization: Bearer <your_token>`

**æŸ¥è¯¢å‚æ•°**:
- `date`: æ—¥æœŸï¼Œæ ¼å¼ä¸º `YYYY-MM-DD` (å¯é€‰, é»˜è®¤æ˜¯å½“å¤©çš„ UTC+8 æ—¥æœŸ)ã€‚

**è¯·æ±‚å‚æ•°**:
```json
{
    "content": "ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œä¸Šåˆå·¥ä½œå¾ˆé¡ºåˆ©ï¼Œå®Œæˆäº†é‡è¦çš„é¡¹ç›®ã€‚ä¸­åˆå’ŒåŒäº‹ä¸€èµ·åƒé¥­èŠå¤©å¾ˆå¼€å¿ƒã€‚ä¸‹åˆå¼€ä¼šæ—¶æœ‰ç‚¹ç´§å¼ ï¼Œä½†æœ€ç»ˆé¡ºåˆ©é€šè¿‡äº†ã€‚æ™šä¸Šå›å®¶çœ‹åˆ°å®¶äººå¾ˆæ¸©æš–ã€‚"
}
```

**å‚æ•°è¯´æ˜**:
- `content`: æ—¥è®°å†…å®¹ (å¿…å¡«)

**å“åº”ç¤ºä¾‹**:
```json
{
    "ID": 1,
    "CreatedAt": "2025-08-03T10:00:00Z",
    "UpdatedAt": "2025-08-03T10:00:00Z",
    "DeletedAt": null,
    "UserID": 1,
    "Date": "2025-08-03T00:00:00Z",
    "Content": "ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œä¸Šåˆå·¥ä½œå¾ˆé¡ºåˆ©ï¼Œå®Œæˆäº†é‡è¦çš„é¡¹ç›®ã€‚ä¸­åˆå’ŒåŒäº‹ä¸€èµ·åƒé¥­èŠå¤©å¾ˆå¼€å¿ƒã€‚ä¸‹åˆå¼€ä¼šæ—¶æœ‰ç‚¹ç´§å¼ ï¼Œä½†æœ€ç»ˆé¡ºåˆ©é€šè¿‡äº†ã€‚æ™šä¸Šå›å®¶çœ‹åˆ°å®¶äººå¾ˆæ¸©æš–ã€‚",
    "EmotionAnalysis": "{\"emotions\":[{\"emotion\":\"å¼€å¿ƒ\",\"intensity\":0.8,\"time_period\":\"ä¸Šåˆ\",\"color\":\"#FFD700\",\"description\":\"å·¥ä½œé¡ºåˆ©å¸¦æ¥çš„æ»¡è¶³æ„Ÿ\"},...],\"summary\":{...}}",
    "emotion_data": {
        "emotions": [
            {
                "emotion": "å¼€å¿ƒ",
                "intensity": 0.8,
                "time_period": "ä¸Šåˆ",
                "color": "#FFD700",
                "description": "å·¥ä½œé¡ºåˆ©å¸¦æ¥çš„æ»¡è¶³æ„Ÿ"
            },
            {
                "emotion": "å¿«ä¹",
                "intensity": 0.7,
                "time_period": "ä¸­åˆ",
                "color": "#FF6B6B",
                "description": "ä¸åŒäº‹äº¤æµçš„æ„‰æ‚¦æ„Ÿ"
            },
            {
                "emotion": "ç´§å¼ ",
                "intensity": 0.6,
                "time_period": "ä¸‹åˆ",
                "color": "#E17055",
                "description": "å¼€ä¼šå‰çš„ç„¦è™‘æƒ…ç»ª"
            },
            {
                "emotion": "æ¸©æš–",
                "intensity": 0.9,
                "time_period": "æ™šä¸Š",
                "color": "#FFB8B8",
                "description": "å®¶åº­æ¸©é¦¨å¸¦æ¥çš„æ„ŸåŠ¨"
            }
        ],
        "gradient_suggestion": {
            "type": "sweep",
            "reasoning": "ä¸€å¤©ä¸­æœ‰å¤šç§æƒ…ç»ªè½¬æ¢ï¼Œé€‚åˆä½¿ç”¨æ‰«ææ¸å˜å±•ç°æƒ…ç»ªè½®è½¬"
        },
        "summary": {
            "dominant_emotion": "ç§¯æ",
            "emotional_stability": 7.5,
            "mood_trend": "æ•´ä½“å‘å¥½",
            "energy_level": "ä¸­ç­‰åé«˜"
        },
        "insights": [
            "ä»Šå¤©æ•´ä½“æƒ…ç»ªçŠ¶æ€è‰¯å¥½ï¼Œå·¥ä½œå’Œå®¶åº­éƒ½ç»™ä½ å¸¦æ¥äº†æ­£é¢æƒ…ç»ª",
            "ä¸‹åˆçš„ç´§å¼ æƒ…ç»ªæ˜¯æ­£å¸¸çš„å·¥ä½œå‹åŠ›ååº”ï¼Œä½†æœ€ç»ˆå¾—åˆ°äº†å¾ˆå¥½çš„ç¼“è§£",
            "å®¶åº­å…³ç³»æ˜¯ä½ é‡è¦çš„æƒ…ç»ªæ”¯æ’‘ç‚¹"
        ],
        "recommendations": [
            "ç»§ç»­ä¿æŒå·¥ä½œå’Œç”Ÿæ´»çš„å¹³è¡¡",
            "å¯ä»¥åœ¨å¼€ä¼šå‰åšä¸€äº›æ·±å‘¼å¸æ¥ç¼“è§£ç´§å¼ ",
            "å¤šå’Œå®¶äººåˆ†äº«å·¥ä½œä¸­çš„æˆå°±"
        ]
    }
}
```

**é”™è¯¯å“åº”**:
```json
{
    "error": "diary already exists for this date"
}
```
æˆ–
```json
{
    "error": "failed to analyze emotion: API request failed"
}
```

---

### 2. è·å–ç”¨æˆ·çš„æ‰€æœ‰æ—¥è®°

**æ¥å£åœ°å€**: `POST /api/diary/list`

**è¯´æ˜**: è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æ—¥è®°ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´é™åºæ’åˆ—ã€‚**è¿”å›æ‰€æœ‰æ—¥è®°çš„æƒ…ç»ªåˆ†ææ•°æ®**ã€‚

**è¯·æ±‚å¤´**:
`Authorization: Bearer <your_token>`

**è¯·æ±‚å‚æ•°**: æ— éœ€è¯·æ±‚ä½“

**å“åº”ç¤ºä¾‹**:
```json
[
    {
        "ID": 2,
        "CreatedAt": "2025-08-04T10:00:00Z",
        "UpdatedAt": "2025-08-04T10:00:00Z",
        "DeletedAt": null,
        "UserID": 1,
        "Date": "2025-08-04T00:00:00Z",
        "Content": "ä»Šå¤©å·¥ä½œæœ‰ç‚¹ç´¯ï¼Œä½†æ˜¯å®Œæˆäº†ä»»åŠ¡ï¼Œå¿ƒæƒ…è¿˜ä¸é”™ã€‚",
        "EmotionAnalysis": "{\"emotions\":[{\"emotion\":\"æ»¡è¶³\",\"intensity\":0.7,\"time_period\":\"æ™šä¸Š\",\"color\":\"#96CEB4\",\"description\":\"å®Œæˆä»»åŠ¡çš„æˆå°±æ„Ÿ\"}],\"summary\":{...}}",
        "emotion_data": {
            "emotions": [
                {
                    "emotion": "æ»¡è¶³",
                    "intensity": 0.7,
                    "time_period": "æ™šä¸Š",
                    "color": "#96CEB4",
                    "description": "å®Œæˆä»»åŠ¡çš„æˆå°±æ„Ÿ"
                }
            ],
            "gradient_suggestion": {
                "type": "radial",
                "reasoning": "å•ä¸€æƒ…ç»ªé€‚åˆå¾„å‘æ¸å˜"
            },
            "summary": {
                "dominant_emotion": "æ»¡è¶³",
                "emotional_stability": 7,
                "mood_trend": "ç¨³å®š",
                "energy_level": "ä¸­ç­‰"
            },
            "insights": ["è™½ç„¶å·¥ä½œåŠ³ç´¯ï¼Œä½†ä»»åŠ¡å®Œæˆå¸¦æ¥äº†æ»¡è¶³æ„Ÿ"],
            "recommendations": ["é€‚å½“ä¼‘æ¯ï¼Œä¿æŒå·¥ä½œä¸ä¼‘æ¯çš„å¹³è¡¡"]
        }
    },
    {
        "ID": 1,
        "CreatedAt": "2025-08-03T10:00:00Z",
        "UpdatedAt": "2025-08-03T10:00:00Z",
        "DeletedAt": null,
        "UserID": 1,
        "Date": "2025-08-03T00:00:00Z",
        "Content": "ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œä¸Šåˆå·¥ä½œå¾ˆé¡ºåˆ©...",
        "EmotionAnalysis": "{\"emotions\":[...],\"summary\":{...}}",
        "emotion_data": {
            "emotions": [...],
            "gradient_suggestion": {...},
            "summary": {...},
            "insights": [...],
            "recommendations": [...]
        }
    }
]
```

---

### 3. è·å–å•ç¯‡æ—¥è®°

**æ¥å£åœ°å€**: `POST /api/diary/get`

**è¯´æ˜**: è·å–æŒ‡å®š ID çš„æ—¥è®°ã€‚**è¿”å›å®Œæ•´çš„æƒ…ç»ªåˆ†ææ•°æ®**ã€‚

**è¯·æ±‚å¤´**:
`Authorization: Bearer <your_token>`

**è¯·æ±‚å‚æ•°**:
```json
{
    "id": 1
}
```

**å‚æ•°è¯´æ˜**:
- `id`: æ—¥è®°çš„å”¯ä¸€ ID (å¿…å¡«)

**å“åº”ç¤ºä¾‹**:
```json
{
    "ID": 1,
    "CreatedAt": "2025-08-03T10:00:00Z",
    "UpdatedAt": "2025-08-03T10:00:00Z",
    "DeletedAt": null,
    "UserID": 1,
    "Date": "2025-08-03T00:00:00Z",
    "Content": "ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œä¸Šåˆå·¥ä½œå¾ˆé¡ºåˆ©ï¼Œå®Œæˆäº†é‡è¦çš„é¡¹ç›®ã€‚ä¸­åˆå’ŒåŒäº‹ä¸€èµ·åƒé¥­èŠå¤©å¾ˆå¼€å¿ƒã€‚ä¸‹åˆå¼€ä¼šæ—¶æœ‰ç‚¹ç´§å¼ ï¼Œä½†æœ€ç»ˆé¡ºåˆ©é€šè¿‡äº†ã€‚æ™šä¸Šå›å®¶çœ‹åˆ°å®¶äººå¾ˆæ¸©æš–ã€‚",
    "EmotionAnalysis": "{\"emotions\":[{\"emotion\":\"å¼€å¿ƒ\",\"intensity\":0.8,\"time_period\":\"ä¸Šåˆ\",\"color\":\"#FFD700\",\"description\":\"å·¥ä½œé¡ºåˆ©å¸¦æ¥çš„æ»¡è¶³æ„Ÿ\"},...],\"summary\":{...}}",
    "emotion_data": {
        "emotions": [
            {
                "emotion": "å¼€å¿ƒ",
                "intensity": 0.8,
                "time_period": "ä¸Šåˆ",
                "color": "#FFD700",
                "description": "å·¥ä½œé¡ºåˆ©å¸¦æ¥çš„æ»¡è¶³æ„Ÿ"
            },
            {
                "emotion": "å¿«ä¹",
                "intensity": 0.7,
                "time_period": "ä¸­åˆ",
                "color": "#FF6B6B",
                "description": "ä¸åŒäº‹äº¤æµçš„æ„‰æ‚¦æ„Ÿ"
            },
            {
                "emotion": "ç´§å¼ ",
                "intensity": 0.6,
                "time_period": "ä¸‹åˆ",
                "color": "#E17055",
                "description": "å¼€ä¼šå‰çš„ç„¦è™‘æƒ…ç»ª"
            },
            {
                "emotion": "æ¸©æš–",
                "intensity": 0.9,
                "time_period": "æ™šä¸Š",
                "color": "#FFB8B8",
                "description": "å®¶åº­æ¸©é¦¨å¸¦æ¥çš„æ„ŸåŠ¨"
            }
        ],
        "gradient_suggestion": {
            "type": "sweep",
            "reasoning": "ä¸€å¤©ä¸­æœ‰å¤šç§æƒ…ç»ªè½¬æ¢ï¼Œé€‚åˆä½¿ç”¨æ‰«ææ¸å˜å±•ç°æƒ…ç»ªè½®è½¬"
        },
        "summary": {
            "dominant_emotion": "ç§¯æ",
            "emotional_stability": 7.5,
            "mood_trend": "æ•´ä½“å‘å¥½",
            "energy_level": "ä¸­ç­‰åé«˜"
        },
        "insights": [
            "ä»Šå¤©æ•´ä½“æƒ…ç»ªçŠ¶æ€è‰¯å¥½ï¼Œå·¥ä½œå’Œå®¶åº­éƒ½ç»™ä½ å¸¦æ¥äº†æ­£é¢æƒ…ç»ª",
            "ä¸‹åˆçš„ç´§å¼ æƒ…ç»ªæ˜¯æ­£å¸¸çš„å·¥ä½œå‹åŠ›ååº”ï¼Œä½†æœ€ç»ˆå¾—åˆ°äº†å¾ˆå¥½çš„ç¼“è§£",
            "å®¶åº­å…³ç³»æ˜¯ä½ é‡è¦çš„æƒ…ç»ªæ”¯æ’‘ç‚¹"
        ],
        "recommendations": [
            "ç»§ç»­ä¿æŒå·¥ä½œå’Œç”Ÿæ´»çš„å¹³è¡¡",
            "å¯ä»¥åœ¨å¼€ä¼šå‰åšä¸€äº›æ·±å‘¼å¸æ¥ç¼“è§£ç´§å¼ ",
            "å¤šå’Œå®¶äººåˆ†äº«å·¥ä½œä¸­çš„æˆå°±"
        ]
    }
}
```

**é”™è¯¯å“åº”**:
```json
{
    "error": "unauthorized"
}
```
æˆ–
```json
{
    "error": "Diary not found"
}
```

---

### 4. æ›´æ–°æ—¥è®°

**æ¥å£åœ°å€**: `POST /api/diary/update`

**è¯´æ˜**: æ›´æ–°æŒ‡å®š ID çš„æ—¥è®°ã€‚**æ›´æ–°æ—¶ä¼šé‡æ–°è¿›è¡Œæƒ…ç»ªåˆ†æå¹¶è¿”å›æ–°çš„æƒ…ç»ªæ•°æ®**ã€‚

**è¯·æ±‚å¤´**:
`Authorization: Bearer <your_token>`

**è¯·æ±‚å‚æ•°**:
```json
{
    "id": 1,
    "content": "æ›´æ–°åçš„æ—¥è®°å†…å®¹ï¼šä»Šå¤©å¿ƒæƒ…æœ‰æ‰€æ”¹å–„ï¼Œè™½ç„¶ä¸Šåˆè¿˜æ˜¯æœ‰ç‚¹å¿§éƒï¼Œä½†ä¸‹åˆçœ‹åˆ°é˜³å…‰å¿ƒæƒ…å¥½äº†å¾ˆå¤šã€‚æ™šä¸Šå’Œæœ‹å‹èŠå¤©å¾ˆå¼€å¿ƒã€‚"
}
```

**å‚æ•°è¯´æ˜**:
- `id`: æ—¥è®°çš„å”¯ä¸€ ID (å¿…å¡«)
- `content`: æ›´æ–°åçš„æ—¥è®°å†…å®¹ (å¿…å¡«)

**å“åº”ç¤ºä¾‹**:
```json
{
    "ID": 1,
    "CreatedAt": "2025-08-03T10:00:00Z",
    "UpdatedAt": "2025-08-03T11:00:00Z",
    "DeletedAt": null,
    "UserID": 1,
    "Date": "2025-08-03T00:00:00Z",
    "Content": "æ›´æ–°åçš„æ—¥è®°å†…å®¹ï¼šä»Šå¤©å¿ƒæƒ…æœ‰æ‰€æ”¹å–„ï¼Œè™½ç„¶ä¸Šåˆè¿˜æ˜¯æœ‰ç‚¹å¿§éƒï¼Œä½†ä¸‹åˆçœ‹åˆ°é˜³å…‰å¿ƒæƒ…å¥½äº†å¾ˆå¤šã€‚æ™šä¸Šå’Œæœ‹å‹èŠå¤©å¾ˆå¼€å¿ƒã€‚",
    "EmotionAnalysis": "{\"emotions\":[{\"emotion\":\"å¿§éƒ\",\"intensity\":0.6,\"time_period\":\"ä¸Šåˆ\",\"color\":\"#74B9FF\",\"description\":\"ä¸Šåˆçš„ä½è½æƒ…ç»ª\"},...],\"summary\":{...}}",
    "emotion_data": {
        "emotions": [
            {
                "emotion": "æ²®ä¸§",
                "intensity": 0.6,
                "time_period": "ä¸Šåˆ",
                "color": "#74B9FF",
                "description": "ä¸Šåˆçš„ä½è½æƒ…ç»ª"
            },
            {
                "emotion": "å¼€å¿ƒ",
                "intensity": 0.8,
                "time_period": "ä¸‹åˆ",
                "color": "#FFD700",
                "description": "é˜³å…‰å¸¦æ¥çš„æ„‰æ‚¦æ„Ÿ"
            },
            {
                "emotion": "å¿«ä¹",
                "intensity": 0.9,
                "time_period": "æ™šä¸Š",
                "color": "#FF6B6B",
                "description": "ä¸æœ‹å‹äº¤æµçš„å¿«ä¹"
            }
        ],
        "gradient_suggestion": {
            "type": "diagonal",
            "reasoning": "æƒ…ç»ªä»ä½è½è½¬å‘ç§¯æï¼Œé€‚åˆå¯¹è§’çº¿æ¸å˜å±•ç°è½¬å˜è¿‡ç¨‹"
        },
        "summary": {
            "dominant_emotion": "ç§¯æè½¬å˜",
            "emotional_stability": 6.5,
            "mood_trend": "é€æ­¥æ”¹å–„",
            "energy_level": "ä¸­ç­‰"
        },
        "insights": [
            "ä»Šå¤©ç»å†äº†æƒ…ç»ªçš„è½¬å˜ï¼Œä»ä¸Šåˆçš„ä½è½åˆ°ä¸‹åˆæ™šä¸Šçš„ç§¯æ",
            "é˜³å…‰å’Œæœ‹å‹æ˜¯ä½ é‡è¦çš„æƒ…ç»ªè°ƒèŠ‚å› ç´ ",
            "èƒ½å¤Ÿä»è´Ÿé¢æƒ…ç»ªä¸­æ¢å¤å±•ç°äº†è‰¯å¥½çš„æƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›"
        ],
        "recommendations": [
            "å¤šæ¥è§¦é˜³å…‰å’Œè‡ªç„¶ç¯å¢ƒ",
            "ç»§ç»­ä¿æŒä¸æœ‹å‹çš„äº¤æµ",
            "è®¤è¯†åˆ°è‡ªå·±çš„æƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›å¹¶åŠ ä»¥è¿ç”¨"
        ]
    }
}
```

**é”™è¯¯å“åº”**:
```json
{
    "error": "unauthorized"
}
```

---

### 5. åˆ é™¤æ—¥è®°

**æ¥å£åœ°å€**: `POST /api/diary/delete`

**è¯´æ˜**: åˆ é™¤æŒ‡å®š ID çš„æ—¥è®°ã€‚

**è¯·æ±‚å¤´**:
`Authorization: Bearer <your_token>`

**è¯·æ±‚å‚æ•°**:
```json
{
    "id": 1
}
```

**å‚æ•°è¯´æ˜**:
- `id`: æ—¥è®°çš„å”¯ä¸€ ID (å¿…å¡«)

**å“åº”ç¤ºä¾‹**:
```json
{
    "message": "Diary deleted successfully"
}
```

**é”™è¯¯å“åº”**:
```json
{
    "error": "unauthorized"
}
```

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 200 | æ“ä½œæˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ/tokenæ— æ•ˆ |
| 403 | æ— æƒé™è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 409 | èµ„æºå†²çª |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

## å¸¸è§é”™è¯¯å“åº”

### å‚æ•°é”™è¯¯
```json
{
    "code": 400,
    "message": "è¯·æ±‚å‚æ•°é”™è¯¯"
}
```

### ç”¨æˆ·å·²å­˜åœ¨
```json
{
    "code": 400,
    "message": "ç”¨æˆ·å·²å­˜åœ¨"
}
```

### éªŒè¯ç é”™è¯¯
```json
{
    "code": 400,
    "message": "éªŒè¯ç æ— æ•ˆæˆ–å·²è¿‡æœŸ"
}
```

### ç”¨æˆ·ä¸å­˜åœ¨
```json
{
    "code": 400,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨"
}
```

### é‚®ç®±æœªéªŒè¯
```json
{
    "code": 400,
    "message": "è¯·å…ˆéªŒè¯é‚®ç®±"
}
```


### Tokenæ— æ•ˆ
```json
{
    "code": 401,
    "message": "tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ"
}
```

## ä½¿ç”¨æµç¨‹ç¤ºä¾‹

### å®Œæ•´æ³¨å†Œç™»å½•æµç¨‹

#### æ³¨å†Œæµç¨‹
1. **å‘é€éªŒè¯ç **
   ```bash
   curl -X POST http://localhost:8080/api/auth/send-code \
     -H "Content-Type: application/json" \
     -d '{"email":"test@example.com"}'
   ```

2. **ç”¨æˆ·æ³¨å†Œ**ï¼ˆä½¿ç”¨éªŒè¯ç ï¼‰
   ```bash
   curl -X POST http://localhost:8080/api/auth/register \
     -H "Content-Type: application/json" \
     -d '{"email":"test@example.com","code":"111111"}'
   ```

#### ç™»å½•æµç¨‹
1. **å‘é€éªŒè¯ç **
   ```bash
   curl -X POST http://localhost:8080/api/auth/send-code \
     -H "Content-Type: application/json" \
     -d '{"email":"test@example.com"}'
   ```

2. **ç”¨æˆ·ç™»å½•**ï¼ˆä½¿ç”¨éªŒè¯ç ï¼‰
   ```bash
   curl -X POST http://localhost:8080/api/auth/login \
     -H "Content-Type: application/json" \
     -d '{"email":"test@example.com","code":"111111"}'
   ```

3. **è·å–ç”¨æˆ·ä¿¡æ¯**
   ```bash
   curl -X GET http://localhost:8080/api/profile \
     -H "Authorization: Bearer your_token_here"
   ```

4. **æ›´æ–°ç”¨æˆ·ä¿¡æ¯**
   ```bash
   curl -X POST http://localhost:8080/api/profile \
     -H "Authorization: Bearer your_token_here" \
     -H "Content-Type: application/json" \
     -d '{
       "nickname": "æˆ‘çš„æ˜µç§°",
       "gender": "ç”·",
       "age": 25,
       "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
       "avatar": "https://example.com/avatar.jpg"
     }'
   ```

5. **é€€å‡ºç™»å½•**
   ```bash
   curl -X POST http://localhost:8080/api/logout \
     -H "Authorization: Bearer your_token_here"
   ```

6. **åˆ†ææ—¥è®°æƒ…ç»ª**
   ```bash
   curl -X POST http://localhost:8080/api/emotion/analyze-diary \
     -H "Authorization: Bearer your_token_here" \
     -H "Content-Type: application/json" \
     -d '{
       "diary_content": "ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œå·¥ä½œå¾ˆé¡ºåˆ©ã€‚",
       "diary_date": "2025-01-15",
       "user_context": {
         "age": 25,
         "gender": "å¥³",
         "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ"
       }
     }'
   ```

## æ•°æ®åº“è¡¨ç»“æ„

### Users è¡¨
- `id`: ç”¨æˆ·ID (ä¸»é”®)
- `email`: é‚®ç®±åœ°å€ (å”¯ä¸€ç´¢å¼•)
- `is_email_verified`: é‚®ç®±æ˜¯å¦å·²éªŒè¯
- `avatar`: å¤´åƒURL
- `nickname`: æ˜µç§°
- `gender`: æ€§åˆ«
- `age`: å¹´é¾„
- `profession`: èŒä¸š
- `created_at`: åˆ›å»ºæ—¶é—´
- `updated_at`: æ›´æ–°æ—¶é—´

### Email Verifications è¡¨
- `id`: è®°å½•ID (ä¸»é”®)
- `email`: é‚®ç®±åœ°å€
- `verification_code`: éªŒè¯ç 
- `is_used`: æ˜¯å¦å·²ä½¿ç”¨
- `expires_at`: è¿‡æœŸæ—¶é—´
- `created_at`: åˆ›å»ºæ—¶é—´

### User Sessions è¡¨
- `id`: ä¼šè¯ID (ä¸»é”®)
- `user_id`: ç”¨æˆ·ID (å¤–é”®)
- `token`: ä¼šè¯token
- `expires_at`: è¿‡æœŸæ—¶é—´
- `created_at`: åˆ›å»ºæ—¶é—´

### Diaries è¡¨ (å·²æ›´æ–°)
- `id`: æ—¥è®°ID (ä¸»é”®)
- `user_id`: ç”¨æˆ·ID (å¤–é”®ï¼Œå”¯ä¸€ç´¢å¼•ï¼šidx_user_date)
- `date`: æ—¥è®°æ—¥æœŸ (å”¯ä¸€ç´¢å¼•ï¼šidx_user_date)
- `content`: æ—¥è®°å†…å®¹ (textç±»å‹)
- **`emotion_analysis`**: ğŸ†• æƒ…ç»ªåˆ†ææ•°æ® (textç±»å‹ï¼ŒJSONæ ¼å¼)
- `created_at`: åˆ›å»ºæ—¶é—´
- `updated_at`: æ›´æ–°æ—¶é—´
- `deleted_at`: åˆ é™¤æ—¶é—´ (è½¯åˆ é™¤)

## ğŸ”„ v2.0 ç‰ˆæœ¬å˜æ›´è¯´æ˜

### æ–°å¢åŠŸèƒ½
1. **é›†æˆæƒ…ç»ªåˆ†æ**: æ‰€æœ‰æ—¥è®°æ¥å£è‡ªåŠ¨åŒ…å«æƒ…ç»ªåˆ†æåŠŸèƒ½
2. **æ™ºèƒ½æƒ…ç»ªè¯†åˆ«**: åŸºäºClaude AIçš„16ç§æƒ…ç»ªç±»å‹è¯†åˆ«
3. **æ¸å˜èƒŒæ™¯å»ºè®®**: æ ¹æ®æƒ…ç»ªç»„åˆæ™ºèƒ½æ¨èæ¸å˜ç±»å‹
4. **ä¸ªæ€§åŒ–æ´å¯Ÿ**: æä¾›é’ˆå¯¹æ€§çš„æƒ…ç»ªåˆ†æå’Œå»ºè®®

### æ•°æ®åº“å˜æ›´
- æ–°å¢ `emotion_analysis` å­—æ®µåˆ° `diaries` è¡¨
- ä½¿ç”¨JSONæ ¼å¼å­˜å‚¨å®Œæ•´çš„æƒ…ç»ªåˆ†æç»“æœ
- è‡ªåŠ¨è¿ç§»ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°ç°æœ‰æ•°æ®

### APIå˜æ›´
- **åˆ›å»ºæ—¥è®°**: è¿”å›æ ¼å¼åŒ…å« `emotion_data` å­—æ®µ
- **è·å–æ—¥è®°**: è¿”å›æ ¼å¼åŒ…å« `emotion_data` å­—æ®µ  
- **æ›´æ–°æ—¥è®°**: é‡æ–°åˆ†ææƒ…ç»ªå¹¶è¿”å›æ–°çš„ `emotion_data`
- **è·å–æ—¥è®°åˆ—è¡¨**: æ‰€æœ‰æ—¥è®°éƒ½åŒ…å« `emotion_data` å­—æ®µ

### å‘åå…¼å®¹
- åŸæœ‰çš„æ—¥è®°æ•°æ®ç»“æ„ä¿æŒä¸å˜
- æ–°å¢çš„ `emotion_data` å­—æ®µåœ¨æ²¡æœ‰æƒ…ç»ªåˆ†ææ—¶ä¸º `null`
- ç°æœ‰å®¢æˆ·ç«¯å¯ä»¥å¿½ç•¥æ–°å­—æ®µç»§ç»­æ­£å¸¸å·¥ä½œ

### æ€§èƒ½å½±å“
- åˆ›å»º/æ›´æ–°æ—¥è®°æ—¶ä¼šè°ƒç”¨Claude APIï¼Œå“åº”æ—¶é—´ç•¥æœ‰å¢åŠ 
- è·å–æ—¥è®°æ—¶æ— é¢å¤–APIè°ƒç”¨ï¼Œæ€§èƒ½æ— å½±å“
- å»ºè®®å®¢æˆ·ç«¯æ˜¾ç¤ºåŠ è½½çŠ¶æ€ä»¥æå‡ç”¨æˆ·ä½“éªŒ
